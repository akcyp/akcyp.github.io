(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it["return"]||it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var Point=require("./Point"),CurveSegment=require("./CurveSegment"),Curve=function(){function Curve(pos,weight){_classCallCheck(this,Curve),this.pos=pos,this._weight=weight,this.segments=[],this.newSegment()}return _createClass(Curve,[{key:"newSegment",value:function newSegment(){var weight=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._weight;this.lastSegment&&(this.lastSegment.closed=!0);var path=new Path2D;path.moveTo(this.pos.x,this.pos.y);var segment=new CurveSegment(path,weight);segment.addPoint(new Point(this.pos.x,this.pos.y)),this.segments.push(segment)}},{key:"updatePosition",value:function updatePosition(){this.lastSegment.path.moveTo(this.pos.x,this.pos.y)}},{key:"draw",value:function draw(ctx,color,shadow){var _step,_iterator=_createForOfIteratorHelper(this.segments);try{for(_iterator.s();!(_step=_iterator.n()).done;){var segment=_step.value;segment.draw(ctx,color,shadow)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"update",value:function update(point){this.lastSegment.update(this.pos,point)}},{key:"interfere",value:function interfere(point,additionalDistance){for(var _ret,_this=this,headException=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_loop=function(j){for(var segment=_this.segments[j],i=0;i<segment.pointsHistory.length;i++){var _segment$pointsHistor=segment.pointsHistory[i],x=_segment$pointsHistor.x,y=_segment$pointsHistor.y,distance=Math.sqrt(Math.pow(point.x-x,2)+Math.pow(point.y-y,2));if(distance>segment.weight/2&&distance<additionalDistance+segment.weight/2){var rest=[].concat.apply([],_this.segments.slice(j+1,_this.segments.length).map(function(segm){return segm.pointsHistory}));return headException?{v:segment.pointsHistory.slice(i,segment.pointsHistory.length).concat(rest).some(function(p){return Math.sqrt(Math.pow(point.x-p.x,2)+Math.pow(point.y-p.y,2))>additionalDistance+segment.weight/2})}:{v:!0}}}},j=0;j<this.segments.length;j++)if(_ret=_loop(j),"object"===_typeof(_ret))return _ret.v;return!1}},{key:"lastSegment",get:function get(){return this.segments[this.segments.length-1]}},{key:"weight",get:function get(){return this._weight},set:function set(val){this.lastSegment.weight!==val&&this.newSegment(val),this._weight=val}}]),Curve}();module.exports=Curve},{"./CurveSegment":2,"./Point":3}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var Point=require("./Point"),CurveSegment=function(){function CurveSegment(path,weight){_classCallCheck(this,CurveSegment),this.path=path,this.weight=weight,this.closed=!1,this.pointsHistory=[]}return _createClass(CurveSegment,[{key:"update",value:function update(oldPos,newPos){this.path.quadraticCurveTo(oldPos.x,oldPos.y,(oldPos.x+newPos.x)/2,(oldPos.y+newPos.y)/2),this.addPoint(newPos)}},{key:"addPoint",value:function addPoint(point){this.pointsHistory.push(point)}},{key:"draw",value:function draw(ctx,color,shadow){shadow&&(ctx.shadowBlur=10,ctx.shadowColor=shadow),ctx.strokeStyle=color,ctx.lineCap="square",ctx.lineWidth=this.weight,ctx.stroke(this.path)}}]),CurveSegment}();module.exports=CurveSegment},{"./Point":3}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Point=function Point(x,y){_classCallCheck(this,Point),this.x=x,this.y=y};module.exports=Point},{}],4:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Renderer=require("./Renderer"),Round=require("./Round"),User=require("./User"),EventEmitter=require("../helpers/EventEmitter"),InputController=require("../helpers/inputController"),Game=function(_EventEmitter){function Game(renderer,inputController,config){var _this;return _classCallCheck(this,Game),_this=_super.call(this),_this.inputController=inputController,_this.renderer=renderer,_this.mapSize={x:config.width,y:config.height},_this.rounds=[],_this.users=[],_this.finished=!1,_this}_inherits(Game,_EventEmitter);var _super=_createSuper(Game);return _createClass(Game,[{key:"newUser",value:function newUser(user){this.users.push(user)}},{key:"newRound",value:function newRound(){var _this2=this,round=new Round(this);this.rounds.push(round),this.inputController.once("keydown/32",function(){return round.start()}),round.on("end",function(){return _this2.onRoundEnd(round)}).on("crash",function(user){_this2.users.filter(function(u){return u!==user}).forEach(function(u){return u.points++}),_this2.users.sort(function(prev,next){return next.points-prev.points}),_this2.emit("scoreUpdate",_this2.users)}).on("prepareToEnd",function(){_this2.users.sort(function(prev,next){return next.points-prev.points}),_this2.isWinner()&&_this2.onFinish()})}},{key:"isWinner",value:function isWinner(){return this.users[0].points>=5*this.users.length&&this.users[0].points>this.users[1].points+1}},{key:"onRoundEnd",value:function onRoundEnd(round){this.emit("roundEnd",this.rounds.indexOf(round)),this.finished||this.newRound()}},{key:"onFinish",value:function onFinish(){var _this3=this,winner=this.users[0];this.finished=!0;var winnerMsg={draw:function draw(ctx){ctx.fillStyle=winner.color,ctx.strokeStyle=winner.color,ctx.font="40px san-serif";var textString="GAME OVER",textWidth=ctx.measureText(textString).width,textString2="".concat(winner.name," wins!"),textWidth2=ctx.measureText(textString2).width,width=Math.max(textWidth,textWidth2)+40;ctx.lineWidth=5,ctx.strokeRect((_this3.mapSize.x-width)/2,_this3.mapSize.y/2-75,width,100),ctx.fillText(textString,_this3.mapSize.x/2-textWidth/2,_this3.mapSize.y/2-30),ctx.fillText(textString2,_this3.mapSize.x/2-textWidth2/2,_this3.mapSize.y/2+10)}};this.renderer.push(winnerMsg),this.inputController.once("keydown/32",function(){_this3.renderer.remove(winnerMsg),_this3.emit("finish",_this3.users)})}},{key:"startGame",value:function startGame(){this.rounds=[],this.users.forEach(function(user){return user.points=0}),this.finished=!1,this.newRound()}}]),Game}(EventEmitter);module.exports=Game},{"../helpers/EventEmitter":11,"../helpers/inputController":13,"./Renderer":7,"./Round":8,"./User":10}],5:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var UI=require("./UI"),Game=require("./Game.js"),User=require("./User"),InputController=require("../helpers/inputController"),Main=function(){function Main($app){var _this=this;_classCallCheck(this,Main),$app.setAttribute("tabindex","1"),this.inputController=new InputController($app),this.ui=new UI($app,this.inputController),this.game=new Game(this.ui.render,this.inputController,{width:this.ui.width-150,height:this.ui.height}),this.gameStarted=!1,this.ui.on("setUser",function(config){var user=_this.game.users.find(function(user){return user.color===config.color});if(!user){var _user=new User(config.color,config.name,_this.inputController);_user.setControls(config.controlsLeft,config.controlsRight),_this.game.newUser(_user)}else config.color&&(user.color=config.color),config.controlsLeft&&config.controlsRight&&user.setControls(config.controlsLeft,config.controlsRight)}),this.ui.on("delUser",function(color){var idx=_this.game.users.findIndex(function(user){return user.color===color});_this.game.users[idx].destroy(),_this.game.users.splice(idx,1)}),this.ui.on("startGame",function(){_this.startGame()}),this.game.on("scoreUpdate",function(users){_this.ui.updateScore(users)}),this.game.on("finish",function(){_this.gameStarted=!1,_this.game.rounds=[],_this.game.users.forEach(function(user){return user.points=0}),_this.ui.finishGame()})}return _createClass(Main,[{key:"startGame",value:function startGame(){this.gameStarted||2>this.game.users.length||(this.gameStarted=!0,this.ui.initGame(this.game.users),this.game.startGame())}}]),Main}();module.exports=Main},{"../helpers/inputController":13,"./Game.js":4,"./UI":9,"./User":10}],6:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Point=require("../class/Point"),Curve=require("../class/Curve"),EventEmiiter=require("../helpers/EventEmitter"),_require=require("../helpers/random"),_int=_require.int,Player=function(_EventEmiiter){function Player(ctx,options){var _this;_classCallCheck(this,Player),_this=_super.call(this),_this.ctx=ctx,_this.position=new Point(options.x,options.y),_this.curve=new Curve(_this.position,5),_this.stop=!0,_this.speed=80,_this.agility=1,_this.active=!0,_this.immune=!1,_this.angle=options.angle,_this.vector=0,_this.distanceTraveled=0,_this.crashed=!1,_this.color=options.color;var movement=_this.getMovement(.1),newPos=new Point(_this.position.x+movement.vx,_this.position.y+movement.vy);return _this.curve.update(newPos),_this.position.x=newPos.x,_this.position.y=newPos.y,initBonuses(_assertThisInitialized(_this)),_this}_inherits(Player,_EventEmiiter);var _super=_createSuper(Player);return _createClass(Player,[{key:"setAngle",value:function setAngle(angle){this.angle=angle}},{key:"addAngle",value:function addAngle(va){this.angle-=3.6*va*this.agility}},{key:"getMovement",value:function getMovement(diff){var radians=this.angle*(Math.PI/180),movement=this.speed*diff,vx=movement*Math.sin(radians),vy=movement*Math.cos(radians);return{vx:vx,vy:vy,movement:movement}}},{key:"update",value:function update(diff){if(!this.stop){this.emit("pre/update"),this.vector&&this.addAngle(this.vector);var _this$getMovement=this.getMovement(diff),vx=_this$getMovement.vx,vy=_this$getMovement.vy,movement=_this$getMovement.movement;this.distanceTraveled+=movement;var newPos=new Point(this.position.x+vx,this.position.y+vy);this.position.x=newPos.x,this.position.y=newPos.y,this.active&&this.curve.update(newPos),this.emit("update")}}},{key:"draw",value:function draw(ctx,diff){this.emit("pre/draw"),this.update(diff),this.curve.draw(this.ctx,this.color),ctx.fillStyle="yellow",ctx.beginPath(),ctx.arc(this.position.x,this.position.y,this.curve.weight/2,0,2*Math.PI),ctx.fill(),this.emit("draw")}},{key:"destroy",value:function destroy(){this.emit("destroy"),this._events={}}}]),Player}(EventEmiiter);function initBonuses(player){var data={distanceTraveled:0,distance:0,pause:!1,pauseDistance:0},limits=[_int(200,400),4];player.on("pre/update",function(){var movement=player.distanceTraveled-data.distanceTraveled;data.distanceTraveled=player.distanceTraveled,data.pause?(data.pauseDistance+=movement,data.pauseDistance>player.curve.weight*limits[1]&&(data.pauseDistance=0,data.pause=!1,player.immune=!1,player.active=!0,player.curve.updatePosition(),limits[0]=_int(200,400))):(data.distance+=movement,data.distance>limits[0]&&(data.distance=0,data.pause=!0,player.immune=!0,player.active=!1))})}module.exports=Player},{"../class/Curve":1,"../class/Point":3,"../helpers/EventEmitter":11,"../helpers/random":14}],7:[function(require,module,exports){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it["return"]||it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var Renderer=function(){function Renderer(canvas){_classCallCheck(this,Renderer),this.canvas=canvas,this.ctx=canvas.getContext("2d",{alpha:!1}),this.list=[],this.framerate=60,this.fps=this.framerate,this.lastFrame=Date.now(),this.nextFrame(0)}return _createClass(Renderer,[{key:"push",value:function push(object){this.list.push(object)}},{key:"remove",value:function remove(object){this.list.splice(this.list.indexOf(object),1)}},{key:"nextFrame",value:function nextFrame(){var _this=this,refreshFrameTime=Date.now()-this.lastFrame;this.lastFrame=Date.now(),this.fps=1e3/refreshFrameTime,this.clear(),this.draw(refreshFrameTime/1e3),setTimeout(function(){window.requestAnimationFrame(function(ts){return _this.nextFrame(ts)})},Math.max(0,1e3/this.framerate-refreshFrameTime))}},{key:"draw",value:function draw(diff){var _step,_iterator=_createForOfIteratorHelper(this.list);try{for(_iterator.s();!(_step=_iterator.n()).done;){var drawable=_step.value;this.ctx.save(),drawable.draw(this.ctx,diff,{w:this.canvas.width,h:this.canvas.height}),this.ctx.restore()}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"clear",value:function clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),Renderer}();module.exports=Renderer},{}],8:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it["return"]||it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Game=require("./Game"),User=require("./User"),Player=require("./Player"),EventEmiiter=require("../helpers/EventEmitter"),_require=require("../helpers/random"),_int=_require.int,Round=function(_EventEmiiter){function Round(game){var _this;_classCallCheck(this,Round),_this=_super.call(this),_this.game=game,_this.started=!1,_this.ended=!1,_this.paused=!1,_this.players=new Map;var _step,_iterator=_createForOfIteratorHelper(game.users);try{for(_iterator.s();!(_step=_iterator.n()).done;){var user=_step.value;_this.newPlayer(user)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var mapSize=_this.game.mapSize;return _this.border={draw:function draw(ctx){ctx.strokeStyle="yellow",ctx.strokeRect(0,0,mapSize.x,mapSize.y)}},_this.game.renderer.push(_this.border),_this}_inherits(Round,_EventEmiiter);var _super=_createSuper(Round);return _createClass(Round,[{key:"isOutOfMap",value:function isOutOfMap(player){var padding=1;return player.position.x<padding||player.position.y<padding||player.position.x>this.game.mapSize.x-padding||player.position.y>this.game.mapSize.y-padding}},{key:"newPlayer",value:function newPlayer(user){var _this2=this,_this$generatrePositi=this.generatrePosition(this.game.users.indexOf(user)),x=_this$generatrePositi.x,y=_this$generatrePositi.y,player=new Player(this.game.renderer.ctx,{x:x,y:y,angle:_int(0,360),color:user.color});this.players.set(user,player),this.game.renderer.push(player),user.on("input",function(dir){!_this2.started||_this2.ended||(player.vector={left:-1,right:1}[dir]||0)}),player.on("pre/update",function(){player.immune||(_this2.isOutOfMap(player)||Array.from(_this2.players.values()).some(function(p){return p.curve.interfere(player.position,player.curve.weight/2,p===player)}))&&(player.stop=!0,player.crashed=!0,player.emit("crash"),_this2.emit("crash",user),2>_toConsumableArray(_this2.players.values()).filter(function(player){return!1===player.crashed}).length&&_this2.prepareToEnd())})}},{key:"prepareToEnd",value:function prepareToEnd(){var _this3=this;this.ended=!0;var _step2,_iterator2=_createForOfIteratorHelper(this.players.values());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var player=_step2.value;player.stop=!0}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}this.emit("prepareToEnd",this),this.game.inputController.once("keydown/32",function(){_this3.end()})}},{key:"start",value:function start(){var _step3,_iterator3=_createForOfIteratorHelper(this.players.values());try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var player=_step3.value;player.stop=!1}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}this.started=!0}},{key:"end",value:function end(){var _step4,_iterator4=_createForOfIteratorHelper(this.players.keys());try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var user=_step4.value;user.off("input")}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}var _step5,_iterator5=_createForOfIteratorHelper(this.players.values());try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var player=_step5.value;this.game.renderer.remove(player),player.destroy()}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}this.ended=!0,this.game.renderer.remove(this.border),this.emit("end")}},{key:"generatrePosition",value:function generatrePosition(){return{x:_int(30,this.game.mapSize.x-30),y:_int(30,this.game.mapSize.y-30)}}}]),Round}(EventEmiiter);module.exports=Round},{"../helpers/EventEmitter":11,"../helpers/random":14,"./Game":4,"./Player":6,"./User":10}],9:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Renderer=require("./Renderer.js"),User=require("./User"),EventEmitter=require("../helpers/EventEmitter"),InputController=require("../helpers/InputController"),UI=function(_EventEmitter){function UI($app,inputController){var _this;return _classCallCheck(this,UI),_this=_super.call(this),_this.$app=$app,_this.inputController=inputController,_this.width=640,_this.height=480,_this.canvas=document.createElement("canvas"),_this.$ui=document.createElement("div"),_this.$ui.className="ui",_this.$uiElements={},_this.initUi(),_this.$app.appendChild(_this.canvas),_this.$app.appendChild(_this.$ui),_this.canvas.width=_this.width-150,_this.canvas.height=_this.height,_this.$app.style.width="".concat(_this.width,"px"),_this.$app.style.height="".concat(_this.height,"px"),_this.setSize(),_this.render=new Renderer(_this.canvas),_this.initFpsCounter(),_this.playerList=[{color:"red",name:"Fred"},{color:"lime",name:"Greenlee"},{color:"#fd00fd",name:"Pinkey"},{color:"#00fdfd",name:"Bluebell"},{color:"#fd7e00",name:"Willem"},{color:"#cacaca",name:"Greydon"},{color:"olive",name:"Oliver"},{color:"cyan",name:"Cyarlie"}],_this.playerList.forEach(function(data,i){return _this.initPlayer(i,data.color,data.name)}),inputController.on("keydown/32",function(){-1!==_this.$uiElements.mainMenu.className.indexOf("choice")||_this.emit("startGame")}),window.addEventListener("resize",function(){return _this.onResize()}),_this}_inherits(UI,_EventEmitter);var _super=_createSuper(UI);return _createClass(UI,[{key:"setSize",value:function setSize(){var scale=this.getAppScale();this.$app.style.transform="scale(".concat(scale,")")}},{key:"getAppScale",value:function getAppScale(){var scale=Math.min(window.innerHeight/this.height,window.innerWidth/this.width);return Math.floor(95*scale)/100}},{key:"onResize",value:function onResize(){this.setSize(),this.render.clear(),this.render.draw(0)}},{key:"updateScore",value:function updateScore(users){var _this2=this;this.emptyTableScore(),users.forEach(function(user){var player=_this2.playerList.find(function(p){return p.color===user.color});player.$score.innerHTML=user.points,_this2.$uiElements.tableScore.appendChild(player.$user)})}},{key:"initFpsCounter",value:function initFpsCounter(){var _this3=this;this.fpsInterval=setInterval(function(){_this3.$uiElements.fps.innerHTML="FPS: ".concat(Math.floor(_this3.render.fps))},500),this.$uiElements.fps=document.createElement("div"),this.$uiElements.fps.className="fps",this.$ui.appendChild(this.$uiElements.fps)}},{key:"initUi",value:function initUi(){var _this4=this;this.$ui.innerHTML='\n      <div class="main-menu">\n        <div class="title">\n          <span>Achtung, </span>\n          <span>die Kurve!<span>\n        </div>\n        <div class="subtitle">\n          akcyp remake\n        </div>\n        <div class="control-info">\n          <span>left</span>\n          <span>right</span>\n        </div>\n        <div class="start">Start</div>\n        <div class="list"></div>\n      </div>\n      <div class="ingame">\n        <div class="goalInfo">\n          <p>goal</p>\n          <div>10</div>\n          <span>2 points diff</span>\n        </div>\n        <div class="tableScore"></div>\n        <div class="navInfo">Space to continue</div>\n      </div>\n    ',this.$uiElements.mainMenu=this.$ui.querySelector(".main-menu"),this.$uiElements.playerList=this.$ui.querySelector(".list"),this.$uiElements.start=this.$ui.querySelector(".start"),this.$uiElements.start.addEventListener("click",function(){-1!==_this4.$uiElements.mainMenu.className.indexOf("choice")||_this4.emit("startGame")}),this.$uiElements.goal=this.$ui.querySelector(".goalInfo div"),this.$uiElements.tableScore=this.$ui.querySelector(".tableScore")}},{key:"initPlayer",value:function initPlayer(index,color,name){var _this5=this,$player=document.createElement("div");$player.className="player",$player.style.color=color,this.$uiElements.playerList.appendChild($player);var $counter=document.createElement("div");$counter.className="counter",$counter.innerHTML="".concat(index+1),$player.appendChild($counter);var $color=document.createElement("div");$color.className="color",$color.innerHTML=name,$player.appendChild($color);var $leftKey=document.createElement("div");$leftKey.className="leftKey",$player.appendChild($leftKey);var $rightKey=document.createElement("div");$rightKey.className="rightKey",$player.appendChild($rightKey),$color.addEventListener("click",function(){-1!==_this5.$uiElements.mainMenu.className.indexOf("choice")||(_this5.playerList[index].leftKey&&_this5.playerList[index].rightKey?($player.classList.remove("active"),$leftKey.innerHTML="",$rightKey.innerHTML="",_this5.playerList[index].leftKey=void 0,_this5.playerList[index].rightKey=void 0,_this5.emit("delUser",color)):(_this5.$uiElements.mainMenu.classList.add("choice"),$player.classList.add("active"),$leftKey.classList.add("active"),_this5.inputController.once("keydown",function(e){return 32===e.keyCode||void($leftKey.classList.remove("active"),$leftKey.innerHTML=e.key.toUpperCase().replace("ARROW",""),_this5.playerList[index].leftKey=e.keyCode,$rightKey.classList.add("active"),_this5.inputController.once("keydown",function(e){return 32===e.keyCode||void($rightKey.classList.remove("active"),$rightKey.innerHTML=e.key.toUpperCase().replace("ARROW",""),_this5.playerList[index].rightKey=e.keyCode,_this5.emit("setUser",{color:color,name:name,controlsLeft:[_this5.playerList[index].leftKey],controlsRight:[_this5.playerList[index].rightKey]}),_this5.$uiElements.mainMenu.classList.remove("choice"))}))})))});var $user=document.createElement("div");$user.className="user",$user.style.color=color;var $name=document.createElement("div");$name.className="name",$name.innerHTML=name,$user.appendChild($name);var $score=document.createElement("div");$score.className="score",$user.appendChild($score),this.playerList[index].$user=$user,this.playerList[index].$score=$score}},{key:"emptyTableScore",value:function emptyTableScore(){for(;this.$uiElements.tableScore.firstChild;)this.$uiElements.tableScore.removeChild(this.$uiElements.tableScore.firstChild)}},{key:"clearTableScore",value:function clearTableScore(){this.emptyTableScore(),this.playerList.forEach(function(playerInfo){playerInfo.$score.innerHTML="0"})}},{key:"prepareToGame",value:function prepareToGame(users){var _this6=this;this.$uiElements.goal.innerHTML=5*users.length,this.clearTableScore(),this.playerList.forEach(function(playerInfo){users.find(function(user){return user.color===playerInfo.color})&&_this6.$uiElements.tableScore.appendChild(playerInfo.$user)})}},{key:"initGame",value:function initGame(users){this.$ui.classList.add("isGame"),this.clearTableScore(),this.prepareToGame(users)}},{key:"finishGame",value:function finishGame(){this.$ui.classList.remove("isGame"),this.clearTableScore()}}]),UI}(EventEmitter);module.exports=UI},{"../helpers/EventEmitter":11,"../helpers/InputController":12,"./Renderer.js":7,"./User":10}],10:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var InputController=require("../helpers/inputController"),EventEmitter=require("../helpers/EventEmitter"),User=function(_EventEmitter){function User(color,name,inputController){var _this;return _classCallCheck(this,User),_this=_super.call(this),_this.inputController=inputController,_this.points=0,_this.name=name,_this.color=color,_this.controls={keys:{left:[37],right:[39]},pressHistory:[],last:null},_this.onKeyDown=function(e){[].concat(_toConsumableArray(_this.controls.keys.left),_toConsumableArray(_this.controls.keys.right)).includes(e.keyCode)&&e.keyCode!==_this.controls.last&&(_this.controls.pressHistory.unshift(e.keyCode),_this.controls.last=e.keyCode,_this.onControlChange())}.bind(_assertThisInitialized(_this)),inputController.on("keydown",_this.onKeyDown),_this.onKeyUp=function(e){[].concat(_toConsumableArray(_this.controls.keys.left),_toConsumableArray(_this.controls.keys.right)).includes(e.keyCode)&&(_this.controls.pressHistory.splice(_this.controls.pressHistory.indexOf(e.keyCode),1),_this.controls.last=_this.controls.pressHistory[0],_this.onControlChange())}.bind(_assertThisInitialized(_this)),inputController.on("keyup",_this.onKeyUp),_this}_inherits(User,_EventEmitter);var _super=_createSuper(User);return _createClass(User,[{key:"onControlChange",value:function onControlChange(){var _this2=this,key=Object.keys(this.controls.keys).find(function(key){return _this2.controls.keys[key].includes(_this2.controls.last)})||null;this.emit("input",key)}},{key:"setControls",value:function setControls(left,right){this.controls.keys.left=left,this.controls.keys.right=right}},{key:"destroy",value:function destroy(){this.inputController.off("keydown",this.onKeyDown),this.inputController.off("keyup",this.onKeyUp)}}]),User}(EventEmitter);module.exports=User},{"../helpers/EventEmitter":11,"../helpers/inputController":13}],11:[function(require,module,exports){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it["return"]||it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var EventEmitter=function(){function EventEmitter(){_classCallCheck(this,EventEmitter),this._events={}}return _createClass(EventEmitter,[{key:"on",value:function on(key,listener){return this._events[key]||(this._events[key]=[]),this._events[key].push(listener),this}},{key:"off",value:function off(key,listener){if(this._events[key])if(listener instanceof Function){var idx=this._events[key].indexOf(listener);-1!==idx&&this._events[key].splice(idx,1)}else delete this._events[key];return this}},{key:"emit",value:function emit(key){if(this._events[key]){for(var listeners=this._events[key].slice(),_len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var _step,_iterator=_createForOfIteratorHelper(listeners);try{for(_iterator.s();!(_step=_iterator.n()).done;){var listener=_step.value;listener.apply(this,args)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return this}},{key:"once",value:function once(key,listener){return this.on(key,function x(){this.off(key,x);var ret=listener.apply(this,arguments);!0===ret&&this.once(key,listener)}),this}}]),EventEmitter}();module.exports=EventEmitter},{}],12:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var EventEmitter=require("./EventEmitter"),InputController=function(_EventEmitter){function InputController($el){var _this;return _classCallCheck(this,InputController),_this=_super.call(this),$el.addEventListener("keydown",function(e){e.preventDefault(),_this.emit("keydown",e),_this.emit("keydown/".concat(e.keyCode),e)},!1),$el.addEventListener("keyup",function(e){e.preventDefault(),_this.emit("keyup",e),_this.emit("keyup/".concat(e.keyCode),e)},!1),_this}_inherits(InputController,_EventEmitter);var _super=_createSuper(InputController);return InputController}(EventEmitter);module.exports=InputController},{"./EventEmitter":11}],13:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var EventEmitter=require("./EventEmitter"),InputController=function(_EventEmitter){function InputController($el){var _this;return _classCallCheck(this,InputController),_this=_super.call(this),$el.addEventListener("keydown",function(e){e.preventDefault(),_this.emit("keydown",e),_this.emit("keydown/".concat(e.keyCode),e)},!1),$el.addEventListener("keyup",function(e){e.preventDefault(),_this.emit("keyup",e),_this.emit("keyup/".concat(e.keyCode),e)},!1),_this}_inherits(InputController,_EventEmitter);var _super=_createSuper(InputController);return InputController}(EventEmitter);module.exports=InputController},{"./EventEmitter":11}],14:[function(require,module,exports){"use strict";module.exports={int:function int(min,max){if(min=Math.floor(min),max=Math.floor(max),max<min){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(Math.random()*(max-min+1))+min},color:function color(){var min=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,max=1<arguments.length&&arguments[1]!==void 0?arguments[1]:16777214;return"#"+module.exports.int(min,max).toString(16)},curveColor:function curveColor(){return module.exports.color(5592404,11184809)}}},{}],15:[function(require,module,exports){"use strict";var Main=require("./core/Main.js");window.main=new Main(document.querySelector("#app"))},{"./core/Main.js":5}]},{},[15]);
